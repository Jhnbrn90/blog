<!DOCTYPE html>
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->
	<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta name="author" content="John Braun">


        <title>John Braun // Blog - Contributing to an open source PHP package</title>

        <!-- FAVICON -->
        <!-- CSS -->
        <link rel="stylesheet" href="https://johnbraun.nl/theme/css/style.css">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">

        <!-- Custom CSS -->
        	<link rel="stylesheet" href="https://johnbraun.nl/theme/css/colors/blue.css" id="colors">

        <!-- Code highlight color scheme -->
            <link href="https://johnbraun.nl/theme/css/code_blocks/darkly.css" rel="stylesheet">


        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->




    <meta property="og:type" content="article">
    <meta property="og:title" content="Contributing to an open source PHP package">
    <meta property="og:url" content="contributing-to-an-open-source-php-package.html">
    <meta property="og:description" content="Contributing to packages instead of applications can look challenging. In this blog post I want to show a workflow to work on PHP packages and be able to test them out locally.">
    <meta property="article:published_time" content="Thursday, September 17, 2020">
    <meta name="twitter:title" content="Contributing to an open source PHP package">
    <meta name="twitter:description" content="Contributing to packages instead of applications can look challenging. In this blog post I want to show a workflow to work on PHP packages and be able to test them out locally.">
    <meta name="description" content="Contributing to packages instead of applications can look challenging. In this blog post I want to show a workflow to work on PHP packages and be able to test them out locally.">
    <meta name="twitter:image" content="posts/contributing-to-a-PHP-package/cover.png">
    <meta property="og:image" content="posts/contributing-to-a-PHP-package/cover.png">
	          <meta property="og:locale" content="">
			<meta property="og:site_name" content="John Braun // Blog">

	<meta property="og:type" content="article">
	<meta property="article:author" content="">
	<meta property="og:url" content="https://johnbraun.nl/contributing-to-an-open-source-php-package.html">
	<meta property="og:title" content="Contributing to an open source PHP package">
	<meta property="og:description" content="">
       <meta property="og:image" content="https://johnbraun.nl/posts/contributing-to-a-PHP-package/cover.png">
	<meta property="article:published_time" content="2020-09-17 00:00:00+02:00">
	</head>
	<body>
		<header id="header">
			<!-- Container -->
			<div class="container">
				<!-- Logo / Mobile Menu -->
				<div class="five columns">
					<div id="textlogo">
						<h1><a href="https://johnbraun.nl/">John Braun // Blog</a></h1>
					</div>
				</div>
						<!-- Navigation
				================================================== -->
				<div class="eleven columns">

					<nav id="navigation" class="menu">
						<ul id="responsive">

							<li><a href="https://johnbraun.nl/">Home</a></li>


							        <li><a href="https://johnbraun.nl/pages/about.html">About</a></li>
						</ul>
					</nav>
				</div>
			</div>
			<!-- Container / End -->
		</header>
		<!-- Header / End -->

		<!-- Breadcrumbs Container-->
		<div id="content-wrapper">
			<section id="titlebar">
				<!-- Container -->
				<div class="container">
				<div class="thirteen columns">
					<nav id="breadcrumbs">
						<ul>
							<li>You are here:</li>
							<li><a href="https://johnbraun.nl/">Home</a></li>
<li>Contributing to an open source PHP package</li>
						</ul>
					</nav>
				</div>
				</div>
				<!-- Container / End -->
			</section>

			<div class="container">
        <div class="twelve alt columns">
<article class="post" style="margin: 0; border: 0;">
	<section class="post-content">
		<header class="meta">
            <h2>
                <a href="https://johnbraun.nl/contributing-to-an-open-source-php-package.html">Contributing to an open source PHP package</a>
            </h2>
			<ul>
				<li>Published: 17-09-2020</li>
			</ul>
		</header>

		<h2>Introduction</h2>
<p>In view of upcoming <a href="https://hacktoberfest.digitalocean.com/">Hacktoberfest</a>, I want to share some tips for beginners who might want to make their first contribution specifically to a PHP <strong>package</strong>. From my own experience, I know it can look daunting to work on a package as opposed to a "regular" (Laravel) application.  </p>
<p>This post is intended to provide some guidance to first-time contributors to open source PHP packages.</p>
<h2>Step 1. Fork the package on GitHub</h2>
<p>As an example, say we want to work on the <a href="https://github.com/spatie/laravel-medialibrary">laravel-medialibrary</a> package.</p>
<p>First, fork the package on GitHub, since we (probably) do not have rights to push branches to the main repository. The fork will act as our "working copy" of the package and serves a central place to push branches containing your work.</p>
<h2>Step 2. Clone your fork</h2>
<p>Clone the package from your fork to your local machine. Personally, I have a separate folder for "applications" and "packages".</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>packages

git<span class="w"> </span>clone<span class="w"> </span>git@github.com:Jhnbrn90/laravel-medialibrary.git<span class="w"> </span>.
</code></pre></div>

<h2>Step 3. Require the package within a (Laravel) project</h2>
<p>Require the cloned package within an application to test the desired functionality or bug fix. This application can for example be a fresh installation of Laravel, but it doesn't have to be.</p>
<p><em>Personally, I always create a new Laravel application named "hacktober".</em></p>
<p>In this application, you can require the package <em>locally</em> instead of via <em>Packagist</em>, by defining a custom so called <code>repository</code> in the <code>composer.json</code> file of the application.</p>
<p>Replace the "url" with the directory where the package lives.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span>

<span class="w">  </span><span class="nt">&quot;repositories&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;path&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../../packages/laravel-medialibrary&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<p>Since Composer uses the specified <code>repositories</code> as a fallback, you'll need to update the name of your package in <code>composer.json</code>. Otherwise, it would just pull in the latest version of the laravel-medialibrary by Spatie from Packagist. </p>
<p>You can rename the package in <code>composer.json</code> as follows:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;JhnBrn90/laravel-medialibrary&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="err">....</span>
<span class="p">}</span>
</code></pre></div>

<p><strong><em>Important:</em></strong> <em>never commit this change!</em></p>
<p>Require the package in the Laravel application:</p>
<div class="highlight"><pre><span></span><code>composer<span class="w"> </span>require<span class="w"> </span>JhnBrn90/laravel-medialibrary
</code></pre></div>

<p>This will create a <em>symlink</em> to the local package instead of installing the package from Packagist.  </p>
<h2>Step 4. Commit your work</h2>
<p>All changes you make in the package will now directly be reflected within the application used to test the package.</p>
<p>Create a new branch for your feature or bug fix from the branch as specified in the project's contribution guidelines, commonly described in a <code>CONTRIBUTING.md</code> file.</p>
<div class="highlight"><pre><span></span><code>git checkout -b feature/some-feature
</code></pre></div>

<p>It is <strong>important</strong> to commit your changes to a branch other than the <code>master</code> branch on your fork, since maintainers (or others) might want to push changes to your branch which is impossible if you create a PR from your <code>master</code> branch. Thanks to Caleb (<a href="https://twitter.com/calebporzio">@calebporzio</a>) for this <a href="https://twitter.com/calebporzio/status/1308734324175495169">explanation on twitter</a>:</p>
<blockquote>
<p>"Yeah, if you make a PR off your forked master, I can't push changes to it. If it's a feature branch I can pull down the PR and push changes. Helpful for things like adding tests or fixing merge conflicts on someone elses PR. Otherwise I have to wait for them."</p>
</blockquote>
<p>Commit your work on this branch, while trying to separate commits by pieces of related code. The <a href="https://desktop.github.com/">GitHub Desktop</a> tool makes it easy to seggregate the changes into commits.</p>
<h2>Step 5. Push your branch</h2>
<p>If you're happy with the current state of your work, you can push the branch to your own fork of the repository.</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>push<span class="w"> </span>--set-upstream<span class="w"> </span>origin<span class="w"> </span>some-feature
</code></pre></div>

<p>After pushing your branch, GitHub will most likely provide a URL to directly create a new PR. Alternatively you can create a PR via GitHub's webinterface.</p>
<h2>Step 6. Create a new PR</h2>
<p>Now that you have a branch which contains your work, you can create a new pull request to the branch according to the contribution guidelines (most commonly <code>master</code> or <code>develop</code>). Use the <strong>"New pull request"</strong> button in the Pull Requests tab and make sure to enable <em>"compare across forks"</em>. This allows you to create the PR from the branch on your fork to the base repository. </p>
<p><img alt="Creating a new PR from a fork" src="images/posts/contributing-to-a-PHP-package/create-pr.png"></p>
<h3>Write a good description</h3>
<p>The PR should ideally be easy to understand and be clear on its intentions: 
- <strong>why</strong> did you do/change something 
- <strong>how</strong> does it work 
- how can others <strong>test</strong> the PR </p>
<p>Sometimes, a PHPUnit or end-to-end test is required before your PR can be accepted. If you find this challenging, you could always ask the maintainer if somebody else could add these later to your PR.</p>
<p>An example of a good description could be as follows:</p>
<p><em>Closes issue #13</em></p>
<h4>What has been done (and why)</h4>
<p>A confirmation dialog was added to the Reset action button, to prevent accidental resets.</p>
<h4>How does it work</h4>
<ul>
<li>A view for a confirmation modal was added</li>
<li>A callback was added to the <code>onClick</code> action, which opens a new confirmation modal</li>
</ul>
<p>Additionally, the callback accepts parameters X and Y to be able to ..., see the code example below:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">showConfirmationDialog</span><span class="p">(</span><span class="nv">$x</span><span class="p">,</span> <span class="nv">$y</span><span class="p">)</span>
<span class="p">{</span>
   <span class="c1">// Add a code example to clarify the PR</span>
<span class="p">}</span> 
</code></pre></div>

<h4>How to test</h4>
<ul>
<li>Click on "Reset", confirm the modal and assert the counter is reset</li>
<li>Click on "Reset", cancel the modal and assert the counter is not reset </li>
</ul>
<h4>Todo</h4>
<p>These are some things I'm unsure about</p>
<ul>
<li>Add tests: </li>
<li>to assert clicking "Cancel" does not reset the counter</li>
<li>to assert clicking "Confirm" does reset the counter</li>
</ul>
<hr>
<h2>Summary</h2>
<p>I hope the suggested workflow can help first-time contributors to contribute to a PHP package with confidence. 
If you want to learn more about the ins-and-outs of creating a Laravel specific package, make sure to checkout these resources:</p>
<ul>
<li><a href="https://laravelpackage.com">LaravelPackage.com</a></li>
<li><a href="https://laravelpackage.training/">Laravel Package Training</a></li>
<li><a href="https://phppackagedevelopment.com/">PHP Package Development course</a></li>
</ul>
<hr>
<h2>Advanced tips</h2>
<h3>Configure an upstream</h3>
<p>While optional, I would advise to also configure the repository where we forked the package from as an "upstream" repository. This allows us to pull in changes from this repository at a later stage, for example when a PR was merged into master in the meantime.</p>
<p>We can add this remote by using the <code>git remote add</code> command:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>upstream<span class="w"> </span>git@github.com:spatie/laravel-medialibrary.git
</code></pre></div>

<p>When you run <code>git remote -v</code>, you should now see two separate remotes: "origin" referring to your own repository and "upstream" referring to the originating repository.</p>
<h3>Update (rebase) your PR with latest changes</h3>
<p>While you work on an issue or feature, it might happen that another PR was merged before you created yours. 
In that case, it might be a good idea to pull in the latest changes on <code>master</code> in the upstream repository.</p>
<p>Incorporate changes in <code>master</code> (or <code>develop</code>) in the branch you're currently developing on as follows:</p>
<ul>
<li>Make sure all changes on your working branch are committed and the working directory is clean</li>
<li>Pull in the latest version of <code>master</code> from the upstream repository:</li>
<li><code>git checkout master</code></li>
<li><code>git pull upstream master</code></li>
<li>Rebase your feature branch on the latest version of <code>master</code>:</li>
<li><code>git checkout feature/some-feature</code></li>
<li><code>git rebase master</code></li>
</ul>

<div class="sharing">
</div>
<hr>

	</section>
	<div class="clearfix"></div>

</article>

        </div>

        <!-- Sidebar -->
        <div class="four columns">




                
        </div>
			</div>
			<!-- Container / End -->
		</div>
		<!-- Content Wrapper / End -->

	<!-- Javascripts -->
	<script src="https://johnbraun.nl/theme/js/jquery.min.js"></script>
	</body>
</html>